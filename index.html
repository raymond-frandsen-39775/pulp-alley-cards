<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pulp Alley Card Lookup</title>
  <style>
    body { background:#d6c5a0; margin:0; font-family:Georgia,"Times New Roman",serif; }
    .wrap { max-width:1100px; margin:24px auto; padding:0 16px 96px; text-align:center; }
    h1 { font-family:"Copperplate",Georgia,serif; font-size:26px; margin:0 0 12px; }
    .bar { display:flex; gap:8px; justify-content:center; margin-bottom:16px; }
    input[type="search"]{ width:60%; min-width:280px; padding:10px 12px; font-size:16px; border:1px solid #b9a37f; border-radius:6px; }
    button{ padding:10px 14px; font-size:16px; cursor:pointer; border:1px solid #b9a37f; border-radius:6px; background:#f6edd9; }

    .cards{ display:flex; flex-wrap:wrap; gap:16px; justify-content:center; }

    .card{
      width:300px; position:relative; text-align:left; color:#1a0f08;
      background:#f8f0db; border:2px solid #4c2b16; border-radius:8px;
      box-shadow:0 4px 10px rgba(0,0,0,.35); padding:14px 16px 44px;
    }
    .card:before{
      content:""; position:absolute; inset:0; pointer-events:none; border-radius:6px;
      background-image: radial-gradient(#f6e9c6 1px,transparent 1px), radial-gradient(#f6e9c6 1px,transparent 1px);
      background-position:0 0,10px 10px; background-size:20px 20px; opacity:.45; z-index:0;
    }

    .corner{ position:absolute; width:28px; height:28px; opacity:.9; }
    .corner.tl{ left:-2px; top:-2px; }
    .corner.tr{ right:-2px; top:-2px; transform:rotate(90deg); }
    .corner.br{ right:-2px; bottom:-2px; transform:rotate(180deg); }
    .corner.bl{ left:-2px; bottom:-2px; transform:rotate(270deg); }

    .title{ position:relative; z-index:1; font-family:"Copperplate",Georgia,serif; text-align:center; font-size:22px; font-weight:900; margin:2px 0 8px; }
    .row{ position:relative; z-index:1; margin:6px 0; }
    .label{ font-weight:900; }
    .flavor{ position:relative; z-index:1; text-align:center; font-style:italic; margin:10px 0 6px; }

    .divider{ display:flex; justify-content:center; align-items:center; margin:10px 0; }
    .divider svg{ width:100%; height:auto; max-width:calc(300px - 24px); display:block; }

    .challengeHdr{ position:relative; z-index:1; text-align:center; font-weight:900; font-size:18px; margin:2px 0; }
    .skills{ position:relative; z-index:1; text-align:center; font-weight:700; font-size:16px; margin-top:2px; }

    .badge{
      position:absolute; bottom:6px; width:40px; height:40px; border-radius:50%;
      background:#e9ddc1; border:2px solid #9d8a62; display:flex; align-items:center; justify-content:center;
      font-weight:900; color:#22150c; box-shadow:0 2px 4px rgba(0,0,0,.25); z-index:2;
    }
    .badge.left{ left:8px; }

    .badge.right{
      right:8px;
      width:40px;
      height:40px;
      border-radius:50%;
      border:2px solid #9d8a62;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 2px 4px rgba(0,0,0,.25);
      /* no background here; the inline SVG draws its own coin/enamel */
    }
    .badge.right svg{
      width:100%;
      height:100%;
      display:block;
    }

    .footer{ position:absolute; left:0; right:0; bottom:12px; text-align:center; font-size:12px; color:#3c2a1a; z-index:1; }

    .actions{ position:absolute; top:6px; right:6px; z-index:3; display:flex; gap:6px; }
    .btn-add{ font-size:12px; padding:6px 8px; border-radius:6px; border:1px solid #b9a37f; background:#fff4cf; cursor:pointer; }

    .handHeader{
      position:sticky; bottom:0; background:rgba(248,240,219,.98); border-top:2px solid #4c2b16;
      box-shadow:0 -6px 16px rgba(0,0,0,.25); padding:10px 12px; display:flex; align-items:center; gap:10px; justify-content:space-between; z-index:10;
    }
    .handTitle{ font-weight:900; font-family:"Copperplate",Georgia,serif; }
    .handControls{ display:flex; gap:8px; align-items:center; }
    /* Hand layout: allow wrapping to multiple rows */
    .handGrid{
      display:flex;                 /* switch from grid to flex */
      flex-wrap:wrap;               /* âœ… allow new rows */
      justify-content:center;       /* nicely centered */
      align-items:flex-start;
      gap:16px;
      padding:12px 12px 18px;
      background:rgba(246,237,217,.9);
      border-bottom:2px solid #4c2b16;
    }

    /* Hand cards */
    .card.hand{
      width:220px;
      box-sizing:border-box;
      padding:10px 12px 48px;
      position:relative;
      flex:0 0 auto;                /* prevents squishing */
    }


    .card.hand .title{ font-size:18px; margin-bottom:6px; }
    .card.hand .badge{ width:34px; height:34px; bottom:6px; }
    .card.hand .footer{ font-size:11px; }

    /* Remove button shown only on cards in the hand */
    .removeBtn{
      position:absolute; top:6px; right:6px;
      width:26px; height:26px; border-radius:50%;
      border:1px solid #8b734f; background:#fff0d0;
      font-weight:900; font-size:16px; color:#3c2a1a;
      display:flex; align-items:center; justify-content:center;  /* centers the X */
      line-height:1; cursor:pointer; z-index:4;
    }
    .removeBtn:hover{ background:#ffe6bd; }
 /* --- Confirm Modal --- */
.modal {
  position: fixed; inset: 0; z-index: 1000;
  display: none; /* shown via .show */
  align-items: center; justify-content: center;
  background: rgba(0,0,0,.45);
}
.modal.show { display:flex; }

.modalBox {
  width: min(420px, 92vw);
  background:#f8f0db;
  border:2px solid #4c2b16; border-radius:10px;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
  padding:18px 20px;
  text-align:center; color:#1a0f08;
}
.modalTitle {
  font-family:"Copperplate", Georgia, serif;
  font-size:18px; font-weight:900; margin:0 0 6px;
}
.modalMsg { margin:4px 0 12px; }
.modalBtns { display:flex; gap:10px; justify-content:center; }
.modalBtns button{
  padding:8px 16px; cursor:pointer; border-radius:8px;
  border:1px solid #b9a37f; background:#fff4cf; font-weight:700;
}
.modalBtns button.btnDanger{
  background:#e9d2b1; border-color:#a68458;
}
.modalBtns button:focus{ outline:2px solid #8b734f; outline-offset:2px; }
   
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Pulp Alley Fortune Card Lookup</h1>
    <div class="bar">
      <input id="q" type="search" placeholder="Search by ID or Name..." />
      <button id="btnSearch">Search</button>
    </div>
    <div id="results" class="cards"></div>
  </div>

  <div class="handHeader">
    <div class="handTitle">Hand: <span id="handCount">0</span></div>
    <div class="handControls">
      <button id="btnClearHand">Clear Hand</button>
    </div>
  </div>
  <div id="hand" class="handGrid"></div>

  <script>
    /* Corner ornament */
    function ornSvg(){
      return '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path fill="#4c2b16" d="M0,0 L64,0 L64,8 C44,8 20,24 8,40 L0,40 Z" opacity=".85"/></svg>';
    }

    /* Search */
    function doSearch(){
      var q=document.getElementById('q').value;
      document.getElementById('results').innerHTML='Searching...';
      google.script.run.withSuccessHandler(render).withFailureHandler(function(e){alert(e.message);}).searchDatabase({q:q,page:1});
    }
    document.getElementById('btnSearch').onclick=doSearch;

    /* Results render */
    function render(payload){
      var headers=payload.headers||[], rows=payload.rows||[];
      var resultsEl=document.getElementById('results');
      if(!rows.length){resultsEl.innerHTML='<p>No cards found.</p>';return;}
      var objs=rows.map(r=>{var o={}; headers.forEach((h,i)=>o[h]=r[i]); return o;});
      idToObj={}; objs.forEach(o=>idToObj[o.ID]=o);
      resultsEl.innerHTML = objs.map(o => cardHTML(o,{showAdd:true})).join('');
    }

    /* Divider (three skull tiles + spear) */
    function skullDividerSepia(){
      return '<svg viewBox="0 0 300 36" xmlns="http://www.w3.org/2000/svg">'+
        '<g stroke="#3c2a1a" stroke-width="2" stroke-linecap="round" fill="none">'+
        '<path d="M8 18 H95"/><path d="M205 18 H292"/></g>'+
        '<rect x="110" y="6" width="24" height="24" fill="#2b1a10" stroke="#3c2a1a"/>'+
        '<rect x="138" y="6" width="24" height="24" fill="#2b1a10" stroke="#3c2a1a"/>'+
        '<rect x="166" y="6" width="24" height="24" fill="#2b1a10" stroke="#3c2a1a"/>'+
        '<defs><g id="s"><path d="M12,5 c5,0 9,3.5 9,8 c0,3 -1.5,4.5 -3.5,5.4 v2.2 h-11 v-2.2 C4.5,17.5 3,16 3,13 C3,8.5 7,5 12,5 z" fill="#f7f2e3" stroke="#3c2a1a" stroke-width="0.75"/>'+
        '<ellipse cx="9" cy="12" rx="2" ry="2.8" fill="#3c2a1a"/><ellipse cx="15" cy="12" rx="2" ry="2.8" fill="#3c2a1a"/>'+
        '<path d="M12 14 l-1.5 2.2 h3 z" fill="#3c2a1a"/><rect x="8" y="19.2" width="8" height="3.2" rx="0.8" fill="#3c2a1a"/></g></defs>'+
        '<use href="#s" x="110" y="6"/><use href="#s" x="138" y="6"/><use href="#s" x="166" y="6"/></svg>';
    }

    /* ==== Inline SVG Icon Set ==== 
       - Add new icons by extending iconSVG() with another case
       - Icons use 'currentColor' so you can recolor via .iconCircle { color: ... }
    */
    function iconSVG(name){
      const key = String(name||'').trim().toLowerCase();
      const uid = Math.random().toString(36).slice(2, 8); // unique per call

      switch (key) {

       case 'gear':
          return '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor">'
              + '<path d="M28 6h8l2 6 6 2 6-2 4 7-5 4 1 6 5 4-4 7-6-2-6 2-2 6h-8l-2-6-6-2-6 2-4-7 5-4-1-6-5-4 4-7 6 2 6-2 2-6z"/>'
              + '<circle cx="32" cy="32" r="10" fill="#fff" fill-opacity=".15"/>'
              + '</g></svg>';

        case 'star':
          return '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M32 6l7.5 15.2 16.8 2.4-12.1 11.8 2.9 16.7L32 44.6 16.9 52.9l2.9-16.7L7.7 23.6 24.5 21z"/></svg>';

        case 'skull':
          return '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">'
              + '<path d="M32 10c9 0 16 6.8 16 15.2 0 5.7-3 8.6-6.8 10.3V40H22.8v-4.5C19 34 16 31 16 25.2 16 16.8 23 10 32 10z" fill="currentColor"/>'
              + '<ellipse cx="26" cy="26" rx="3.5" ry="4.5" fill="#fff" fill-opacity=".1"/>'
              + '<ellipse cx="38" cy="26" rx="3.5" ry="4.5" fill="#fff" fill-opacity=".1"/>'
              + '<path d="M28 30l-2.2 3.2h4.4zM24 36h16v3H24z" fill="#fff" fill-opacity=".15"/>'
              + '</svg>';

        case 'bolt':
          return '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M38 6 14 36h14l-2 22 26-32H38z"/></svg>';

        case 'book':
          return '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">'
              + '<path d="M10 14c8-3 12-3 20 0v36c-8-3-12-3-20 0V14z" fill="currentColor"/>'
              + '<path d="M54 14c-8-3-12-3-20 0v36c8-3 12-3 20 0V14z" fill="currentColor"/>'
              + '<path d="M30 50c-6-2-10-2-16 0M50 50c-6-2-10-2-16 0" stroke="#fff" stroke-width="2" opacity=".25" fill="none"/>'
              + '</svg>';

        case 'glass': {
          const gBronze = `gBronzeMag_${uid}`, gEnamel = `gEnamelMag_${uid}`;
          return ''
          + '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">'
          + '  <defs>'
          + `    <radialGradient id="${gBronze}" cx="30%" cy="25%" r="80%"><stop offset="0%" stop-color="#e7bf97"/><stop offset="50%" stop-color="#b68459"/><stop offset="100%" stop-color="#744f33"/></radialGradient>`
          + `    <radialGradient id="${gEnamel}" cx="35%" cy="30%" r="75%"><stop offset="0%" stop-color="#ffffff"/><stop offset="100%" stop-color="#f4efe6"/></radialGradient>`
          + '  </defs>'
          + `  <circle cx="32" cy="32" r="31" fill="url(#${gBronze})" />`
          + `  <circle cx="32" cy="32" r="29" fill="url(#${gEnamel})" stroke="#c1b092" stroke-width="1"/>`
          + '  <g stroke="#3c2a1a" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none">'
          + '    <circle cx="28" cy="28" r="10" />'
          + '    <line x1="35" y1="35" x2="46" y2="46" />'
          + '  </g>'
          + '</svg>';
        }

        case 'lock': {
          const gBronze = `gBronzeLock_${uid}`, gEnamel = `gEnamelLock_${uid}`;
          return ''
          + '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">'
          + '  <defs>'
          + `    <radialGradient id="${gBronze}" cx="30%" cy="25%" r="80%"><stop offset="0%" stop-color="#e7bf97"/><stop offset="50%" stop-color="#b68459"/><stop offset="100%" stop-color="#744f33"/></radialGradient>`
          + `    <radialGradient id="${gEnamel}" cx="35%" cy="30%" r="75%"><stop offset="0%" stop-color="#ffffff"/><stop offset="100%" stop-color="#f4efe6"/></radialGradient>`
          + '  </defs>'
          + `  <circle cx="32" cy="32" r="31" fill="url(#${gBronze})" />`
          + `  <circle cx="32" cy="32" r="29" fill="url(#${gEnamel})" stroke="#c1b092" stroke-width="1"/>`
          + '  <g stroke="#3c2a1a" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none">'
          + '    <path d="M24 30 v-6 a8 8 0 0 1 16 0 v6" />'
          + '    <rect x="22" y="30" width="20" height="16" rx="2" ry="2" fill="#3c2a1a" />'
          + '    <circle cx="32" cy="38" r="2" fill="#f4efe6" stroke="none"/>'
          + '    <line x1="32" y1="40" x2="32" y2="44" stroke="#f4efe6" stroke-width="2"/>'
          + '  </g>'
          + '</svg>';
        }
    case 'person': {
      const gBronze = `gBronze_${uid}`, gEnamel = `gEnamel_${uid}`, clip = `iconClip_${uid}`;
      return ''
      + '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">'
      + '  <defs>'
      + `    <radialGradient id="${gBronze}" cx="30%" cy="25%" r="80%"><stop offset="0%" stop-color="#e7bf97"/><stop offset="50%" stop-color="#b68459"/><stop offset="100%" stop-color="#744f33"/></radialGradient>`
      + `    <radialGradient id="${gEnamel}" cx="35%" cy="30%" r="75%"><stop offset="0%" stop-color="#ffffff"/><stop offset="100%" stop-color="#f4efe6"/></radialGradient>`
      + `    <clipPath id="${clip}"><circle cx="32" cy="32" r="22"/></clipPath>`
      + '  </defs>'
      + `  <circle cx="32" cy="32" r="31" fill="url(#${gBronze})"/>`
      + '  <circle cx="32" cy="32" r="31" fill="none" stroke="rgba(0,0,0,.35)" stroke-width="1"/>'
      + '  <circle cx="32" cy="32" r="29" fill="none" stroke="rgba(255,255,255,.6)" stroke-width="1.5"/>'
      + `  <circle cx="32" cy="32" r="22" fill="url(#${gEnamel})" stroke="#c1b092" stroke-width="1"/>`
      + `  <g clip-path="url(#${clip})">`
      + '    <image x="10" y="10" width="44" height="44" preserveAspectRatio="xMidYMid meet"'
      + '           href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABkCAYAAADpGkzhAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCA1LjEuOWxu2j4AAAC2ZVhJZklJKgAIAAAABQAaAQUAAQAAAEoAAAAbAQUAAQAAAFIAAAAoAQMAAQAAAAIAAAAxAQIAEAAAAFoAAABphwQAAQAAAGoAAAAAAAAAYAAAAAEAAABgAAAAAQAAAFBhaW50Lk5FVCA1LjEuOQADAACQBwAEAAAAMDIzMAGgAwABAAAAAQAAAAWgBAABAAAAlAAAAAAAAAACAAEAAgAEAAAAUjk4AAIABwAEAAAAMDEwMAAAAABMz8BIJY/XoAAAHu1JREFUeF7tfXmUVcW97lfD3mdqmqZpGlCQ0ZjEoBiv5sbreo/3XMu7cvW+OIIiDigoOCCoDE6AggMioGhUnOfxek3WTVZesu6L+vJWYvIiDvddxKitDA3Sgz2dYY/1e39U7X2GHkEQMHysWt2neu/aVV9V/eo37QPDAYhNv3tiilNwJ3ueV/P3Z85fXvn33vDS2vnLhZTttrTeP+PKu96q/PshANj89tNT/uM3j6yrrN8b+MWDi9f9/IHFUyrr/6bwn//+6OTKun2Nx2+95Kknls78xp+73/D/fvPwJZV1+wPPrbzigOjHPsE7r60asOz9JvHErTMPyH7tEd55ddUBvYIeXng+PXjDtM8fWTLjgO5nn/jjy6sOOtn40MLpb25YcuE+6zevrNgb+OPL9yz/8XmL36+sPwgwxfP99+5bMPXAFy1/fmXN2Mq6gxU/WzjjzfuvO//AHM9vH7n1W6fLrr7qnLYVl51+YI3rfz9z18F7uPSDe6+eRnddceaBMb7/+dCt+8TyO5Cw9prz6J7Lz9i/4/zVAzc+VVn3bcbPFlywf8b78p1X7Z8H72fce8WZ3+y4X793wTf7wAMMT996+Tcz/l+uX3RgHBb7Gf+2/pZ9y8Mba+afUVn3t4zXVy/aLT5YZUVveGPNtWPPvP7+LyrrD3bcev211NbWBs914bkuQAogBSk5ElIik05iSPUg3Lh2Q49cvbp68dipC1cNiJceG9hXWDR3JuULLgqOi0LBQd4pwPd9hGEIpRRABAaO+mFDUT+sDmsefXqf9e/WhdfTxx//FU3NTfiqtRWFQgFuoQBLSti2BOcMnAiJhER1VQb1dUMx6ejv4+Z1j+5xnwbkG3nmlou/lo5567xZdP3sC6krm0NXTpe848D3A3h+gELBQTaXR2dXFh2dndjx5Zf45LMGzJkxlVYsnk+V7e0NfPrFFjTuakJHNg+fACZtJDJVsNMZWKk0pJ0EpIQfEtq7cti+cxc+3PQRrrvk3G79+ePPnx4QP/3O0r+uumrKWYt/tsfxvOsuPY92NbeAcQlwgbzjoOC6CEMFUgTP85HP5+G6LsIgQKgUGAgAoWbwYAwdUoOJR07EfY89229fB4qpU6dSQ8MXaGlpAWeAEByCC0gpIQWHFBwUBPB9B77jwHUdqMBHMmkjnUzg5JP+Huuffb2sP288smrKmXMW98nTXhtAT5h/yVTSq9iFIgYCgxcE8IIQvu/Dc30EQaBLGGqywxCB78H3PdjSQiJhYeTIkThy/Hjc/+TzX7u/0y+4gLZs3YrW1jbkcjkIzsEFBweD4AyM6e2uVIgw8AAVQjAGDoJSASgMcPT3v4ujv/c9rFj/+G71p08x8tSNM/bY1Th76um0tbERuYIDJiWICJ4fQBEgpAQYhx8ECJSCkBLJZBLJdBrJdBpCWlDEkM3n0dTUjE8/a8C7772HC874SbctvDuYNfsK+rThc+zc1YSC44JxAeIcihiCUMHxfOQdF135PLL5PPKOhxAMyUwVBtcOhZ1MISDCzqZmfLhpE25fdHVZf/7w2hN98tUr2S/fNmus8oNrK+sHgmsuPJuam1uQzebhByEAMxjHRRAEUIp0IQIRAYwDjCNUCr6ZEM45hLRgJZIIFaGtvR3bd+zAFTOm7hHh112/kHbs3Imuri74fgAuBKRlgTGOkAhh3BcGIQSYECDGoACAcTDOAa772ZXNY8eXu7CtcUfZM04697LlL61c2KtbtleyA89fdtm9Lw+prO8P11x0Fm1vbERXNocgDPUAwOAHAQqOA9f1DOGhkcwMighBGMJxXORyOQRBAC4lqgYNQl19PQbX1ABCoCubw44vv8S82RfvNuHbtm1DW1sbwlDBsiwkkwkkEgkwzqHCUAtUwWHZNlKZNJKpJKSUAIAgCOB6HpQCmJBw/QAdXV1oamnGyhsrDnDOl5V9LkGPZD9/88VjZ9zxzMzK+oFg565daGtvh+O6CEIF1/PhOC48Xx9+fhDC83z4gZ4IIkKoFIIghOcHcD0fIRE4F5CWjUQyBWnbCImQLzho+aoNjTt2Vj62X7S1fYVCIQ/GACkEWKm0ZQyMM31QCg4hBDjnYFwf1UEYwjeHNxhDEOox5HJ5tLV3lDQEnH/Tqpm3TTu1x9XdI9lCiF5npy/cdNVMchwXgSIoMARBgK5sFm3t7fB8H9KyQSC4nqv1a6W3bxCE8MMAikhvV8ZAjCEIAziOC8dx4HkBXN9HPl9AW3sHrp07a7dWN4HAOYMlJRgjuK6DQiEPUiEsKWBJCUtKkFJwHEdrR2ZnKlIIlEKgQgRBAMYAISQ4F6Aejshlr/y2RyOnG9kvLZs19vzbn9yjVd3S2oqC4yIIQigi+Eohm8ujo7MTrueBCw5FBM/z4AeaXEWkBxGGIBCYMGQTEAQhHM+D6/kIQr36C66L9s5ObG/cgRuuvWrghJMCZ4CUHAyA53lwXQcgBUsKSKG1EaIQvuch8H2QUiCC7qdSUEqBlAL0ggTn3eiLsfqi07ut7m5Xc8b2aFXffM1l1NmVRTaX0yIkCKDCUKtyQQDXdWN9OghCrWdHYsRYkJxzSCmhSK9+Lwh0vRBIJBKwEwmESqHgOHEZKMLQhwoDMArBocBJQUBBMIJgBMSqnoIQDFJwcIb4WmYmi3MOBgZSCipUWt73gIXP/rLb6i4j+6Wls2qmLX9sj1Z1e0cnOrq6kM3lUXAc+IGPUKleyNYkEjTZ0aphjEEaNdE1qz8kAuMCdiIB205AKUKh4MRloFCBDxX6AGmjiZsiGCAYNNm+B1AIyRkkZxAM4CBoC4HAAQiudwaZPiuz0nvChiun1ZR+LiObiHbLi1WKRDIJ27b1Cc6YPvSiWWccYRjCdV24rmu2sAvXyGPHcVAoFOB5HoIwBBcCyWQSlmUBgGlLQREgLQuJZBIhEbK5XHkn+sBhI4ajproaggEUhoZIIPBcOPkcfNcFhSEYaVIZCCoMEIaBFh2kEAQBPNcBiGBZFqqrq7H+sd4NLcfzyvgsI3v6iieeLv28O0ikUrBtG0JKMEN2qEIQY2Bc69Cu68JzPXieLq6ryS4UCjHZYRiCc45kKhWTrZRCqBQUEYRlw06moJRCNr+bZA+uBmcMpEItEhjB91wUcjn4ngtSRXHBSEGpEMqIOFIKoe/Dc10QKdi2jcHV1ZWPKcO1j79RxmdM9jM3X9JNoO8OuFH6IzkciQfP8+A4DpRSkFKag0WbxQR9vgnBYVkSiWQCKUNyNGGe52mR4muxpEWNhUQyhXQ6U9mNXrH2gQ1s+LBhyKRTsISIV7bgDJbkEFyb5AwERspYAAQQARTqiTDjTNg20qk0UqlU5WO64Z6Z/xzzGpOtQrXHIgQAGGNlh52Wa1rFyufzICKkUikkkjYsy4KQmnQpOWzbQjqdQiaTQVVVFWzbBhHB9304rgvXceD7WiMhMAgpkU5nUFtbW9mNPnHYyOGorqpCwrbAGQNjBNuSSCWTsC2p60AgUlqcMIAzgEivbM4ZbNtGKpVCVSaDZCJR+YhuCFRRNMdkM8Yujq/YA6xc+zBLpVIx6dBnAMIgQOD7AFGsKimzcjhjZtD6Hl20bIwOUjImdGSF6EOJkMlkMHz4iLI+9Idld65hE8aPx/hxYzFy5AjU1gxBJpUymgczpBKgCAyAJSSkkNALnJBOZ1BfX4/DDz8cY8eNw9oN/fvbb3rml/dFv3MAeHTR9JpL7nrmuLKr9gBDhgyJRUB50SSGYRCLlcD3Y7ID34fjOMjlsujs7EBXVyey2SyCIIBt20gmk0gkEhBCO69cz0U6k8GKlXf2O9hKrH3ocfbKL37NjvnBJIwZMwbV1dVGjdNeR2Vcv5xx2HYCCdsGAwPAUFtbi/HjJ+L7R/8Aj73w2oCffefMM2tQsrL3SopVXV0dkskkuIhkt956Ughzmmu/SKT66QWrRY/v+3AdB4V8Hq7jwPM8AIBt27BtW+u3ZnVzzlHdz+HUH9Y+/DibOGEiRo8ahfr6YRhWV4e6oXWoqanBoOpqDK4ZgmF1w1BfPxzDhtWjvn4ERo8+AhMnTsTd9z88YKIBgHE5BZE/+7HFM9bNXvX8gsqL9gSnn3ISbdmyBbl8HkEYQkoLQojYw0ekTXEhBISUUIrguC78IDCHp9DHJgF2QjuLlCI4jgOAIVNVhfrhw/H2m28NaMAL5lxKZGzq+zY80es9t994AzmOh1w+h3wuByEE0uk07EQCUkqsvPe+bvcuvvZqamxshG1JjBtzBG69e023awBg/YLL1s1b98QCTfaSC9+cffdz/63yot5wz/yZpBJJLFnVfYYvnvrP9NFHH2FXUxM830dV1SAkk0kUCgU4jgPLTsCyE2CMQUG7WiMnFQAwxmFZljlEJaS04Hk+stkspLQwfMRwjB03Hq+98mq3Z1fiypkX0p///Cdwpidx8nGT8cgzvevFu4OrZ11KH320GZs2b4YlBI46cgImff97WPvYU7223+sfvg5mzTibPmv4DC0trQiNya6NF9es1iSICIFSYIybYAKD7/vw/RDS0iQzpv0k3ISs6uqG4egfHI0Nj/QfdL3uyjn06aef4POGBiild9WIkSNwxBGjUTe0DoOqq7Hsrnv6bacSSxYsoK3btmLbtm1oampGa2srLCkxor4OY0YdjmO+913c/kD3RQgA7OGF50+eu/qlvZ64ftmMs+jzzz9Ha2srOjo6jfXoIZFMIplIQpGC5wUQloWqqipISyKfLyCXy0NIqaM1ihCECplMBkOHDsWRR34HL774Uo8DKcX8K+fQhx98gI6ODnR2dMQRfBgVNZPRauOwYcMwatThePDx3ldjhPlz59KWrVuxZctWtLa1oe2rVoSkILiALSVSSRtDqgdh/OjROHLsGKx+6rmyNl9atXQye3jh+WfMXf3Sz0v/sLcwf+5F9MUXX2BH407k8jnkcnmQ0i5LZewFadlIpVMQUpNdKDjaD5JIwE4kkUikUF9fjyOOOAKPP/5kv6QAwIXnTaP33tuIXC6HQi6v/dWMIfAD+L4Hy7KQyWQwqHoQamuHonbIEKRSKaTTaRAIYRRFUjpwUHAc5LI5NDU3o6mpGblCHoV8DlxIJGxbnzVQSFoWhg2pweH1dfjVH/5U1tdfPrzmDPbIounL59zzYp+xs6+DhfMuo08++QQd7R3o6OhENtuFrmwWBAZp2ZCWBdtOAIzBcfTqT6UzSGfSGFI7FHV19Rg3bhzuu2/9gIgGgP/xk9Po3Y3/F4W8PicStj5oPd9Ys6QghIAUEpZlabHFtXVLMEQDABn9njGQ0sGLglOACrWDzbJtJBNJANrshwqQsiQGZ9I49ZQpeOTlf4n7/Nbzjy0f8AD6w7zLZ9D6R3s/fObPuZhamlvwVVsrWr9qg+f7UCZkxoWMD0PLslFdPRjVgwdj2PDhWL/+oV7bnDt3Lg2tHYqVd6wsu+ai8y+gD//jQzQ3N6O1pSU+cP0ggOd6CFUYH1aRQ1zr0qaO6YOac6HVTaYjNqEhGUxfrftrnGW+Bwp9CFJI2RZOmXIyXv3N/yrrV68DGSiuveJCamzcju3bGjFi5EgcMeYIrN9QLq9KsXTRPGpuaUF7Rwc6uzrhej4YGBLJJOrrR6B++HDcvbq7mlWKm2+5iT7e/DE2b/4YNYOHoHZILSaMH49169cxAFh64y3U0NCATR9twl8//qtRO7XlqQMCpTEHMj4apgln+jchpYksQWcBmGAHkTZ4uIkoMXMOcEYQRGAUICk5fnzi3+GkE/8ON95b3JF9Dqo/3DD3YvrLBx+guakZzbuaMKS2FvXD6zFp0iQ89MSL/ba9+LoryXFcMMaQSqVxV0nHesOSRTfQxvfew5atW7Hli62oqhqE6kHVOOrI7+DYScfg7rVFDeP0fzyNNm7ciHwhj3whb1yl+m+lDyKmlzjFxDEIaUFaFgiIHWERGBcQJvKulAJnDJbgkAxgyoctOU784WSc+MPJuO3BoubU7+B6w+XTz6ItjY3YvmMnujo70dXZhWQqiXRVBqNHjcaREybgsef614V3B7NmXkQNDQ3YunWbDlZ0dCKZTCGdTGFIzRDU1Q3FuHHj8NzLeqLnzrqcNm7ciOamZjQ1N8H3fSjSK5sBWq2EDuwqRSCoWKAwLnReCYBQmVxEAwZtzZLx/3DoLAcOAqcQtiVx0gnH48cnHI9b1z349ci+6Mx/onff/wB514Pj6SCA53naD2JM6braIRgxciTGjBmDDU+9sEfPAYClNy2khs8/x5YvtmLnzp1ob+9ANtulNQYFWNKCJbQPnYhw1FFH4S8fvh8/b9qZZ1NDQwMaGhpQcAoIwgCktOhgjEEwHUvU/vIioVF8pmewMuo07SYCRISEbeHkH52Ak390Am4qsTy7xSD7w6IrLqVtjTvRlcujUHDgeb4O8CpCGBLCUKFQcNDW3oEdO7/EXz/5FOf+9J9o7qyLaemS60uFZZ9YcPUcmjHtbHrnnXfw0aaP0Ni4Ax3tnXAc1xgperhKhZpAEGzbQuD7uGxGMa/klTdeZ6NGjUJ1dTVSyRQsaYFzDs44GOmclYjoouexv6J6KFqXJeMDjyJTpeg2dWvnTSMhE7h2bfdExqsvnE7/uXkztu/YgZa2r4w+qhCG+vCB3pngXAcDLMtCIpGIvXZRYEBKiaFDh2L48OGQUqJQKCCbzWojpLMTXV1dyGazccjMDwKoEHEWVSUYgGRS+5hrh9Ri5IiRGD16NJ56SWtHV18+h37/+9+jtbUVuVwOruvG8cMoFYEiogz6XtnliK7UwQcgaVk44bhjccLkY3D3o0XbYGCtAbhz0QL6/R/+hIYtW9De2YlcIQ/t+tWzDUMC4/qA4ZyDCxHrs8LkZXAhIDhHOpNBdXU1BOcmGqNzth2Ts6H92TrxMgz16aUJ6RmWZcG2bWRSGVQPGoSRhx2GH/3oRNy9dg1btOB62rjxXWzf3ohdTbvgFApG7AAhFeWxDh1omNGUPKF3RGQLBkjOkU4kcPzkSTj+2ElY+dBju0/2RWecTn/6y3vY2dSsM06Vgg4B6AdpdZSBc90ki1ZHzI7WV7WXlEFwnXnEWHHFktnOWkwUt3VPDFdWRVoEN+3W19fj1FNPxYYntKfv/HPOpU8/+wyfNXyGXDYHy5JgjMMPfPi+H4sW6qHt/qBDaTrElpQSg1JJHHfsJBx3zA+wbH3RTzIgmX3V9LNp69atJinRh1Kh6VJ5t4gMcYa8aKtqZ1SA0KzUIPDhujqvL5vN6WCv62jZS2YDM6P39gLOihMmjRwOieCHIXw/gOO66OjsjK8fOmwYqgdXQwih551rXTl6BpmEoaIreM+KMlkFge/HPvkIAyL7o82bsb2xEZ7n6BxmU6IYHWMmLkqGaFOI9ISUrnrBGYQwO8D4LLjJs7MsgYRtwbYtWJaAMOEqxvTGiKa2eI/Q1qFtQ8hihIgLATCGjs4uLF64iG658SZ68OGH2OCaGpO5ymLDhJmABBEhJLOzdrvoSdK5jDoJs2DS20oxILJbWlrR1dWFINCZpzFKSIiLEd8mlFe2/rvvhQoQYnuu9MLKeyrbLNZp6UkmRbmrqwtNzc3wjccvk6nS5jUraiEEvcpRFgeNouq7UaB/xtqJCo0EKKJfsu9aNE9vbGI6j1mVlB5IJaZLVB+V0nuDUCdUwiRQ6u2v4AYhHFdnsrpBCD9UCImK7Zu2yXjmtMjw4XomyyrKHQxDOK6LrmwObW3tCAI96EQyZQIXxVimIorz9qK4clSinTugYg5IizMkBIMlBCxLlHHZL9lKTz2I8Vj7qCQyJjpaacUTs2y1EVjZPdHOUAQ9CYFOzfWD0CRn6tSFqC3GtO+CoPsRZV1F6byMcTCmkzd9X7tGs7lcrC4mEklIaQHQab9+HAs1h3oF2aZ7Ay4cgACDYDpXUMoKstdfd06f7tWbV69nXMrY8RJtWyDeOTEiWao9ZkVZ3FOJLL6ibC9HJOeF4JBSd1zfp+9lsfjSQxVCImFillzoQeoJ1bkeAJBIJrRsVmGs7SjSE6YPxjKJ0G8BAcwUQNcpIqjQaCesuJbf/c3ryzkY6zdKI6TQqbzQK6AvlB54fRXOtVrYE9ERiu1ofV1v90h9LIU+LKNMV2HIBnT7q1bdxQAgkdD54bFezVisLSmTHly6RaNfdwdkLGmYbKsSvM8V0C21tRKuaxIeuVazhJTgQhso0YpH5CGI5HmoLcugl0IE/V6LlHERQoAL7UOO2orysmPRooxD1KQXc8EBppMvPfNepTIZsp7vo+AUsHDxkmiRw7ItJJNJpNNppFNpJBI2pBSQgmvPneCQgsHqVtBz4eVFckArQ6TfFo44dApf8PlrXut3ZbuujuFpi1CaYlaaEHFglozsjYiOnO09FUU6oVzHG00xbTLOS9rSifJBoH+GikBUDAILMzmhUvCCIJbfigh+oMn2fK3vMs5gWZrsVCqFVJQMKgSk0ISXFiueANbjBOh6QBrSI6KFADjTRlqEk346o+gd6wtHHjaCmr5qQ6i0VkGIfpYr9AMFmVS0qJTWV7ZX2i6RNnZgEnWEEJpYpTWb4qQrJBI2Dj/8cIwaNQpv/+538ThnXz6bWltaIDgHiOD7HoLAjw84mD0aWYW6Qp8MWs4UrwGM3DbXcgZIBiQsgXFjj8At68tjpgMi+zujD6cvm1vg+QECpR+iN2oRERERGX2hlMDK6ys/V5IdfWZcW5iE6JCMpJlWJTLpNCZMmICJE8bj9deKscD9CQ4AaxZe0GcGa2RpabVPW009rULAzH7ZCohmVNOC2KLUdaVuShijoKhjFK+L6+J7YdyZxabJPFtrMfqlpMQAMk33NX777ANnICLbsqy+37k2ZyAzMTf0oofCiBgyv+vP+l/ltcz4N0pL6XYlnS+lyYvaZyWZr0AcMyyyrTsnwMGZNtkPBGzetOktRGTPu/Pp9soLSlEpW2PCKo0AVkJytOLjld7Tyi6HroqXaff7yp6pVcBKd1UkSxkZL2If77x8E1gx57z35t39cDtKLcgV15wzv+yqEggudGQjcvTE7szIiCktFeQblPJeKYKKpfK6nkr5JDJGsWMsSk1WSnsWA9/T+Rz7ES0tTc9Ev8dkCyl7zYoSTHvfYi9fiQjoieCeVm0pyhYtyhZvt9KdbHNvfJE5LKNnEmknUBjoF5CCYlR8f6C9vS3mtR9aNH743Ym0c1czco4DP9DWllJUFlLqhh6qSqEJMiSZa8v0m8q6yvZil6te1UXoAzKdSmP8+HGYMGE8/uX1XwxonPsaZY6opVedc8kd119SOSwwDgjBYFla8YdxBJHSpXI1diOmB3DAGApFoyF6/1ByBsGhi3lPsXRXlTNnxAkI3PRTvzQaGSL9+tr2Ga47+7+UfUNaWU9qamp+fvOaHt4TIdL5bYG2/mBe7olERuxmNN8SwSOievgc1SEy7UNlovLlgQelAPO1URXiI+pTedHfo0Wg0BSlb9h/VANC8DLRXNaX6+54vP2RO6/r/gWBpN+WCnz9GjRIaxQRkSwitZTw+BCt+GzqmDFnw1C7SiNLsCysRkXSY9dsKfEx0eaANTuNzHuLTOkVv7+w+tW3yrS8bhPPObutss62LEip3+VmZnmxaKAlbsZoS0RbvfuWNygjTIuhSgJh7u3mpK8QK3rXaB9yVBgBFCp4rotCNlv59G8ES6f/927vlXYj+/Ila7548t7yL7RNJRNI2BYszsANCZXbmyj+SrzillY6x7n8s16t8ST1MDmloimS2YJFYsjEMWOxVJTRlvlmBc4YVKjgFAroaO/ThNhtPDl/+oC2yu0v/q6bN7XHhffiA8vGTr/mtvjiS889jb7c1YzOzhwcN0BQEarSE6CbIkba0DBd0vZjiYPd+FW4USf1Pfpv+gcDIsMnqjOahxYJ+knKWKvcfHNZpF9TqG+wLAv1dbUYXl+Hx1/61x7HuSd4at40mrn+lT7bW37uyWOXv/Z/BkZ2f7htyfWkB6sZ0VZcxI4hJCKXdFA1Eg1aSigILrH8rtV79PzesGzxfFKhgiVtLL373r3adoRn559HF9338t5t+9N3/72bzPm2YOU1MwckCvYEq847ec942/SHX/cZnzyEcqw+98eH+Dpo8MK65XvlVetvO9ZO/fEhng7hEPrGHRf0/MWAf+u4e+pJ+4aXJT85vs9Y5d8aVkz9h33Lx9X/MHHf/scKBwmWTT35EA+HcAiHcNDh7adWDOg/VziEvYS3n7vzW31YLJ111oE1vpfvX/CtNFdXXDn9wBzXz26/dN8o+PsJd8z7el+Z+o1gwUVTDmpX4x1X7/n/YrJfcM4pR+6z/1J7X+LeG2YflP0GAFxw2rEH1uHSCx5YMueg6OeAcOPcMw7Irblh6TUHZL/2CtYuOzBW0FN3LDwg+vGN4FcvPjj5jSfXdM++2sd4fs3S/SaT925Ifg/x/pv/NiUM/Z/6nj/Fc/3JvufilGmX7ZW+vXDf7eu4FL84/+qb+3y74pvAXhnQ3sZ7b/96SuB7k30vqAmC4L+GYQgVBpOVUjXFNDWFfzz/0rL+/+qFR5cDaAfY+6ddMHu/k1uJ/w9K60I/+Zrn/QAAAABJRU5ErkJggg=="'
      + '           xlink:href="data:image/png;base64,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"/>'
      + '  </g>'
      + '</svg>';
    }    
        case 'flame':
      return ''
      + '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">'
      + '  <defs>'
      + `    <clipPath id="iconClipFlame_${uid}"><circle cx="32" cy="32" r="22"/></clipPath>`
      + '  </defs>'
      + '  <circle cx="32" cy="32" r="22.5" fill="#f6edd9" stroke="#9d8a62" stroke-width="1.5"/>'
      + `  <g clip-path="url(#iconClipFlame_${uid})">`
      + '    <image x="10" y="10" width="44" height="44" preserveAspectRatio="xMidYMid meet"'
      + '           href="data:image/png;base64,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"'
      + '           xlink:href="data:image/png;base64,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"/>'
      + '  </g>'
      + '</svg>';    
        default:
          return '<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M32 6l7.5 15.2 16.8 2.4-12.1 11.8 2.9 16.7L32 44.6 16.9 52.9l2.9-16.7L7.7 23.6 24.5 21z"/></svg>';
      }
    }


    function renderIconInline(name){
      name = (name||'').trim();
      var svg = iconSVG(name);
      return '<div class="badge right">' + svg + '</div>';
    }

    function nl2br(text){
      if (!text) return '';
      // escape HTML, then replace \n with <br>
      return escapeHtml(text).replace(/\n/g, '<br>');
    }

    /* Card HTML */
    function cardHTML(o,opts){
      opts=opts||{};
      var name=o.Name||'Untitled', play=o.Play||'', effect=o.Effect||'', flavor=o.Flavor||'', skills=o.Skills||'', id=o.ID||'', cardLimit=o.CardLimit||'', chall=o.ChallengeValue||'', storyIcon=o.StoryIcon||'';
      var html='<div class="card" data-id="'+id+'">'+
        '<div class="corner tl">'+ornSvg()+'</div><div class="corner tr">'+ornSvg()+'</div><div class="corner br">'+ornSvg()+'</div><div class="corner bl">'+ornSvg()+'</div>';
      // inside cardHTML(o, opts)
      if (opts.isHand) {
        const uidAttr = opts.uid ? ` data-uid="${opts.uid}"` : '';
        html += `<button class="removeBtn"${uidAttr} data-id="${id}" title="Remove from hand">Ã—</button>`;
      }

  
      if(opts.showAdd) html+='<div class="actions"><button class="btn-add" data-id="'+id+'">+ Add to hand</button></div>';
      html+='<div class="title">'+escapeHtml(name)+'</div>';
      if (play) {
        const normalizedPlay = play.trim().toLowerCase();
        const mustPlay = normalizedPlay === 'you must play immediately.';
        const playStyle = mustPlay ? 'color:#a00;font-weight:900;' : '';
        const labelStyle = mustPlay ? 'color:#a00;' : '';
        html += `<div class="row" style="${playStyle}"><span class="label" style="${labelStyle}">Play:</span> ${play}</div>`;
      }
      if (effect) html += `<div class="row"><span class="label">Effect:</span> ${nl2br(effect)}</div>`;
      if (flavor) {
        let f = flavor.trim();
        // Add quotes if not already wrapped
        if (!/^["â€œ].*["â€]$/.test(f)) f = `"${f}"`;
        html += '<div class="flavor">' + f + '</div>';
      }
      html+='<div class="divider">'+skullDividerSepia()+'</div>';
      html+='<div class="challengeHdr">Challenge</div>';
      if(skills) html+='<div class="skills">'+escapeHtml(skills)+'</div>';
      html+='<div class="badge left">'+(chall ? escapeHtml(chall) : 'â€”')+'</div>';
      html+=renderIconInline(storyIcon);
      html+='<div class="footer">#'+escapeHtml(id)+'/'+escapeHtml(cardLimit)+' â€¢ Pulp Alley Â© 2025</div></div>';
      return html;
    }

    /* Hand state */
    var idToObj={}, hand=[], handKey='pulpHandCards.v1';
    function addToHandById(id){
      id = String(id).trim();
      const base = idToObj[id] ? {...idToObj[id]} : { ID:id, Name:'(Unknown)' };
      base._uid = genUID();                 // unique per copy
      hand.push(base);                      // allow duplicates
      saveHand();
      renderHand();
    }
    function removeFromHandById(id) {
      id = String(id).trim();
      console.log('[removeFromHandById] Requested remove ID:', id);

      // Before removal, log current hand IDs for clarity
      console.log('[removeFromHandById] Hand before:', hand.map(c => String(c.ID)));

      // Filter out the matching card
      hand = hand.filter(c => String(c.ID).trim() !== id);

      // Log results after
      console.log('[removeFromHandById] Hand after:', hand.map(c => String(c.ID)));

      // Save + rerender
      saveHand();
      renderHand();
    }

    function removeFromHandByUid(uid){
      console.log('[removeFromHandByUid] removing uid', uid);
      const i = hand.findIndex(c => c._uid === uid);
      if (i !== -1){
        hand.splice(i, 1);
        saveHand();
        renderHand();
      } else {
        console.log('uid not found:', uid);
      }
    }

    function saveHand(){ localStorage.setItem(handKey, JSON.stringify(hand)); }
    function loadHand(){ hand = JSON.parse(localStorage.getItem(handKey)||'[]'); renderHand(); }
    function renderHand(){
      const handEl = document.getElementById('hand');
      const countEl = document.getElementById('handCount');
      countEl.textContent = String(hand.length);
      handEl.innerHTML = hand.map(o => cardHTML(o, { isHand:true, uid:o._uid })).join('');
    }

    function genUID(){
      return 'u' + Date.now().toString(36) + Math.random().toString(36).slice(2,8);
    }

    //------------------------------------------------------------
    // GLOBAL CLICK HANDLER
    //------------------------------------------------------------
    document.addEventListener('click', (e) => {

      // --- Add to hand from search results ---
      const addBtn = e.target.closest('.btn-add');
      if (addBtn) {
        addToHandById(addBtn.dataset.id);
        return;
      }

      // --- Remove single card from hand (the X button) ---
      const removeBtn = e.target.closest('.removeBtn');
      if (removeBtn){
        const uid = removeBtn.getAttribute('data-uid');
        if (uid) removeFromHandByUid(uid);
        else     removeFromHandById(removeBtn.dataset.id); // fallback
        return;
      }

      // --- Clear the entire hand ---
      if (e.target.id === 'btnClearHand') {
        showConfirm('Clear all cards from your hand?', 'Confirm clear').then((ok) => {
          if (ok) {
            hand = [];
            saveHand();
            renderHand();
            console.log('[hand] All cards cleared');
          }
        });
        return;
      }

      // --- Print hand ---
      //if (e.target.id === 'btnPrint') {
      //  window.print();
      //  return;
      //}

    });


    function escapeHtml(s){return String(s).replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));}
/* Show a custom confirm dialog.
   Usage: const ok = await showConfirm('Clear all cards from your hand?');
          if (ok) { ... }
*/
function showConfirm(message, title = 'Confirm') {
  return new Promise((resolve) => {
    const modal = document.getElementById('confirmModal');
    const titleEl = document.getElementById('confirmTitle');
    const msgEl   = document.getElementById('confirmMsg');
    const btnYes  = document.getElementById('confirmYes');
    const btnNo   = document.getElementById('confirmNo');

    titleEl.textContent = title;
    msgEl.textContent   = message;

    // open
    modal.classList.add('show');

    // focus management
    const prevActive = document.activeElement;
    btnNo.focus();

    const cleanup = (result) => {
      modal.classList.remove('show');
      // remove listeners
      btnYes.onclick = btnNo.onclick = null;
      modal.onclick = null;
      document.removeEventListener('keydown', onKey);
      // restore focus
      if (prevActive && typeof prevActive.focus === 'function') prevActive.focus();
      resolve(result);
    };

    const onKey = (e) => {
      if (e.key === 'Escape') cleanup(false);
      if (e.key === 'Enter')  cleanup(true);
    };

    btnYes.onclick = () => cleanup(true);
    btnNo.onclick  = () => cleanup(false);

    // click on backdrop closes (acts like Cancel)
    modal.onclick = (e) => { if (e.target === modal) cleanup(false); };

    document.addEventListener('keydown', onKey);
  });
}

    // Init
    document.getElementById('btnSearch').onclick = doSearch;
    loadHand();
  </script>
<!-- Confirm Modal (reusable) -->
<div id="confirmModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="confirmTitle" aria-describedby="confirmMsg">
  <div class="modalBox">
    <div id="confirmTitle" class="modalTitle">Confirm</div>
    <div id="confirmMsg" class="modalMsg">Are you sure?</div>
    <div class="modalBtns">
      <button id="confirmNo">Cancel</button>
      <button id="confirmYes" class="btnDanger">OK</button>
    </div>
  </div>
</div>

</body>
</html>
